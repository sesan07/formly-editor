<editor-tree-item
    *ngIf="!isSimplified; else simplifiedView"
    [treeLevel]="treeLevel"
    [hasOptions]="hasOptions"
    [optionsMenu]="optionsMenu"
>
    <ng-container headerContent>
        <span class="property-key">
            <span
                #key
                class="keyField"
                [ngClass]="{ editable: !!property.isKeyEditable }"
                [contentEditable]="!!property.isKeyEditable"
            >
            </span>
            <span>:</span>
        </span>
        <mat-form-field
            class="property-field"
            appearance="outline"
        >
            <input
                matInput
                [formControl]="formControl"
                [type]="property.type | lowercase"
            />
        </mat-form-field>
    </ng-container>
</editor-tree-item>

<ng-template #simplifiedView>
    <div class="simplified-wrapper">
        <span
            *ngIf="isOverrideMode && !isInArray"
            class="override-indicator"
            [class.overriden]="isOverridden"
        ></span>
        <mat-form-field class="simplified">
            <mat-label>{{ property.name ? property.name : property.key }}</mat-label>
            <input
                matInput
                [formControl]="formControl"
                [type]="property.type | lowercase"
            />
        </mat-form-field>
        <button
            *ngIf="isOverrideMode && isOverridden"
            class="override-clear-btn"
            mat-icon-button
            (click)="onClearOverride()"
        >
            <mat-icon>clear</mat-icon>
        </button>
    </div>
</ng-template>

<mat-menu #optionsMenu="matMenu">
    <button
        *ngIf="property.isRemovable"
        mat-menu-item
        color="warn"
        (click)="remove.emit()"
    >
        <mat-icon>remove</mat-icon>
        <span>Remove</span>
    </button>
</mat-menu>
