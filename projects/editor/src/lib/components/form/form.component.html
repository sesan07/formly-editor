<div id="leftSidebar" class="sidebar">
	<lib-sidebar-section
		[sectionTitle]="'Add Field'">
        <lib-field-category-list
            *ngFor="let category of editorService.fieldCategories"
            [category]="category"
            [formId]="form.id">
        </lib-field-category-list>
	</lib-sidebar-section>
	<lib-sidebar-section [sectionTitle]="'Fields'">
		<lib-field-tree-item 
			*ngFor="let field of form.fields"
			[field]="field"
			[activeField]="form.activeField"
			[isExpanded]="true">
		</lib-field-tree-item>
	</lib-sidebar-section>
</div>


<div class="sidebar-divider" (mousedown)="onSidebarMouseDown($event, 'leftSidebar', true)"></div>

<lib-form-view class="form-view"
					[form]="form"
					[formChanged$]="formChanged$">
</lib-form-view>

<div class="sidebar-divider" (mousedown)="onSidebarMouseDown($event, 'rightSidebar', false)"></div>

<div id="rightSidebar" class="sidebar" *ngIf="form.activeField">
	<lib-sidebar-section
		[sectionTitle]="'Properties - ' + editorService.getFormattedFieldName(form.activeField.name, form.activeField.key)">
		<lib-object-property
			[target]="form.activeField"
			[property]="activeFieldProperty"
			(valueChanged)="onFieldPropertyChanged()">
		</lib-object-property>
	</lib-sidebar-section>

	<lib-sidebar-section
		[sectionTitle]="'Model'"
		[menuPanel]="modelOptionsMenu">
		<lib-object-property
			[target]="modelClone"
			[property]="propertyService.getAsObjectProperty(modelProperty)">
		</lib-object-property>
	</lib-sidebar-section>
</div>

<mat-menu #modelOptionsMenu="matMenu">
	<button mat-menu-item (click)="onPushModelClicked()">
		<mat-icon>arrow_upward</mat-icon>
		<span>Push</span>
	</button>
	<button mat-menu-item (click)="onPullModelClicked()">
		<mat-icon>arrow_downward</mat-icon>
		<span>Pull</span>
	</button>
</mat-menu>
