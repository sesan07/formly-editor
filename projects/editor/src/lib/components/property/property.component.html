<ng-container [ngSwitch]="property.type">
    <lib-array-property 
        *ngSwitchCase="propertyType.ARRAY"
        [treeLevel]="treeLevel"
        [target]="isRoot ? target : target[property.key]"
        [property]="propertyService.getAsArrayProperty(property)"
        [isSimplified]="isSimplified"
        (remove)="remove.emit()"
        (keyChanged)="onKeyChanged($event)"
        (targetChanged)="targetChanged.emit()">
    </lib-array-property>

    <lib-object-property
        *ngSwitchCase="propertyType.OBJECT"
        [treeLevel]="treeLevel"
        [target]="isRoot ? target : target[property.key]"
        [property]="propertyService.getAsObjectProperty(property)"
        [isSimplified]="isSimplified"
        [isExpanded]="isRoot"
        (remove)="remove.emit()"
        (keyChanged)="onKeyChanged($event)"
        (targetChanged)="targetChanged.emit()">
    </lib-object-property>

    <lib-boolean-property
        *ngSwitchCase="propertyType.BOOLEAN"
        [treeLevel]="treeLevel"
        [property]="property"
        [target]="target"
        [isSimplified]="isSimplified"
        (remove)="remove.emit()"
        (keyChanged)="onKeyChanged($event)"
        (targetChanged)="targetChanged.emit()">
    </lib-boolean-property>

    <lib-chip-list-property
        *ngSwitchCase="propertyType.CHIP_LIST"
        [treeLevel]="treeLevel"
        [property]="propertyService.getAsChiplistProperty(property)"
        [target]="target"
        [isSimplified]="isSimplified"
        (remove)="remove.emit()"
        (keyChanged)="onKeyChanged($event)"
        (targetChanged)="targetChanged.emit()">
    </lib-chip-list-property>

    <lib-textarea-property
        *ngSwitchCase="propertyType.TEXTAREA"
        [treeLevel]="treeLevel"
        [property]="propertyService.getAsTextareaProperty(property)"
        [target]="target"
        [isSimplified]="isSimplified"
        (remove)="remove.emit()"
        (keyChanged)="onKeyChanged($event)"
        (targetChanged)="targetChanged.emit()">
    </lib-textarea-property>

    <ng-container *ngSwitchCase="propertyType.NUMBER">
        <ng-container *ngTemplateOutlet="inputProperty"></ng-container>
    </ng-container>
    <ng-container *ngSwitchCase="propertyType.TEXT">
        <ng-container *ngTemplateOutlet="inputProperty"></ng-container>
    </ng-container>
    <ng-template #inputProperty>
        <lib-input-property
            [treeLevel]="treeLevel"
            [property]="propertyService.getAsInputProperty(property)"
            [target]="target"
            [isSimplified]="isSimplified"
            (remove)="remove.emit()"
            (keyChanged)="onKeyChanged($event)"
            (targetChanged)="targetChanged.emit()">
        </lib-input-property>
    </ng-template>
</ng-container>
