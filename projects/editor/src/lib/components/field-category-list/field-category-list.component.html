<div class="header" (click)="isExpanded = !isExpanded">
    <button mat-icon-button (click)="isExpanded = !isExpanded; $event.stopPropagation()">
        <mat-icon class="expand-icon" [class.expanded-90]="isExpanded">chevron_right</mat-icon>
    </button>
    {{ category.name }}
</div>
<div
    *ngIf="isExpanded"
    cdkDropList
    cdkDropListSortingDisabled
    [cdkDropListData]="fields"
    [cdkDropListEnterPredicate]="canEnter"
    [cdkDropListConnectedTo]="dropListIds"
    (cdkDropListExited)="onDropListExited($event)"
    (cdkDropListEntered)="onDragReturned()">
    <ng-container>
        <div class="custom-field" *ngFor="let field of fields; let i = index" cdkDrag [cdkDragData]="getItemDragData(field)" (cdkDragDropped)="onDragReturned()">
            <div>{{ field.name }}</div>
            <formly-form [fields]="[previewFields[i]]" *cdkDragPreview></formly-form>
            <div *cdkDragPlaceholder>{{ field.name }}</div>
        </div>
    </ng-container>
</div>